{% extends "base.html" %}

{% block head %}
<h1>Forecast Page</h1>
{% endblock %}

{% block body %}

{% if error != None %}
<p class = "errorMessage">{{error}}</p>
{% endif %}

<form action ="{{url_for('weather.forecast')}}" method="POST" class="forecastForm">
        <label for="locationInp">Enter location: </label>
        <input type= "text" id= "locationInp" name= "locationInp" placeholder="e.g. London">
        <input type="submit" id= "locationSubmit" name= "locationSubmit" value="Submit">
</form>
{% if list != [] and indexes != []%}
    <h2 class="forecastTitle">Forecast for {{list["city"]["name"]}} - {{list["city"]["country"]}}</h2>

    <ul class="forecastList">
        {% for item in list["list"]%}
            {% if item["pop"] == 0 %}
                {% set rain = "" %}
            {% else %}
                {% set rain = "Chance of rain: {}%".format(item["pop"]*100) %}
            {% endif %}
        <li><strong>{{item["dt"]}}</strong> - Temperature: {{item["main"]["temp"]}}°C, Feels like: {{item["main"]["feels_like"]}}°C, {{rain}}</li>
        {% endfor%}
    </ul>
{% endif %}

{% endblock %}
